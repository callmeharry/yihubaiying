<!DOCTYPE html>
<html>
<head>
   <title>医呼百应网上预约挂号平台</title>
   <!-- 引入 Bootstrap -->
   <link href="dist/css/bootstrap.min.css" rel="stylesheet">
   <link href="css/common.css" rel="stylesheet">
   <script src="dist/scripts/jquery.min.js"></script>
   <script src="dist/bootstrap/js/bootstrap.min.js"></script>
   <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
   <meta name="description" content=""/>
   <meta name="keywords" content=""/>
   <!-- 移动设备优先 -->
   <!-- device-width 可以确保它能正确呈现在不同设备上,initial-scale=1.0 确保网页加载时，以 1:1 的比例呈现，不会有任何的缩放-->
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>


<body>
<!-- jQuery (Bootstrap 的 JavaScript 插件需要引入 jQuery) -->
<script src="https://code.jquery.com/jquery.js"></script>
<!-- 包括所有已编译的插件 -->
<script src="dist/js/bootstrap.min.js"></script>

<%-include header.html%>

<!--中间部分-->
<div class="container">
   <div class="row">
      <div class="col-xs-3">
         <!--左侧导航栏面板-->
         <div class="panel panel-info panel-left">
            <div class="panel-heading">
               &nbsp;&nbsp;&nbsp;<a href="/personalCenter/personInfo" class="panel-title"><%= user.user_id%></a>，您好！
            </div>
            <div class="panel-body">
               <ul class="nav nav-pills nav-stacked">
                  <li><a href="/personalCenter/myOrder">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我的订单</a></li>
                  <li><a href="/personalCenter/personInfo">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;个人信息</a></li>
                  <li class="active"><a href="/personalCenter/myFavourite">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我的收藏</a></li>
                  <li><a href="/personalCenter/feedback">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;问题反馈</a></li>
               </ul>
               <button class="btn btn-default logout-button" type="button" id="<%= user.user_id%>">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注&nbsp;&nbsp;&nbsp;&nbsp;销&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
            </div>
         </div>
      </div>
      <div class="col-xs-9">
         <!--右侧面板-->
         <div class="panel panel-info panel-right">
            <div class="panel-heading panel-head-center">
               <!--上方名字-->
               我的收藏
            </div>
            <div class="panel-body panel-body-center">
               <table class="table table-striped">
                  <tbody>
                  <% for(var i=0; i<favourites.length; i++) {%>
                  <tr>
                     <td><img src="img/hos_picture.jpg" class="img-responsive" alt="Responsive" style="height:70px"></td>
                     <td colspan="3" class="text-left">
                        <a href="#"><%= favourites[i].hos_name %></a>
                        <p>地址：<%= favourites[i].hos_address %></p>
                        <p>联系方式：<%= favourites[i].hos_tel %></p>
                     </td>
                     <td>
                        <button type="button" class="btn btn-info del" id="<%= favourites[i].favourite_id %>" style="margin-top:20px">删除</button>
                     </td>
                  </tr>
                  <% } %>
                  </tbody>
               </table>

            </div>
         </div>
      </div>
   </div>
</div>
<script>
   $(document).ready(function() {
      $('button.logout-button').click(function(){
         var user_id = $(this).attr("id");
         $.post("/personalCenter/logout",{"user_id":user_id},function(result) {
            if (result.status == 0) {
               window.location.reload();
            } else {
               if (result.msg) {
                  alert(result.msg);
               } else {
                  alert('服务器异常');
               }
            }
         },'json');
         return false;
      });
   });
</script>
<script>
   $(document).ready(function() {
      $('button.del').click(function(){
         var favourite_id = $(this).attr("id");
         $.post("/personalCenter/DropFavourite",{"favourite_id":favourite_id},function(result)  {
            if (result.status == 0) {
               window.location.reload();
            } else {
               if (result.msg) {
                  alert(result.msg);
               } else {
                  alert('服务器异常');
               }
            }
         },'json');
         return false;
      });
   });
</script>
</body>
</html>