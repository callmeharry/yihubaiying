<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>登录</title>
    <link rel="stylesheet" type="text/css" href="../../public/stylesheets/foundation.css"/>
    <link rel="stylesheet" type="text/css" href="../../public/stylesheets/mRegister.css">
    <script src="js/vendor/modernizr.js"></script>
</head>

<body class="o-page">
<div id="page">

	<div align="center">
    <span id="topText">登录</span>
</div>
<nav id="menu">
            <ul>
            	<li >
                    <a href="mLogin.html">
                        <i class="i-home i-small"></i>登陆
                    </a>
                </li>
                <li >
                    <a href="mRegister.html">
                        <i class="i-home i-small"></i>注册
                    </a>
                </li>
                <li >
                    <a href="mIndex.html">
                        <i class="i-home i-small"></i>预约主页
                    </a>
                </li>
                <li>
                    <a href="mAbout.html">
                        <i class="i-about i-small"></i>个人信息
                    </a>
                </li>
                <li>
                    <a href="mBlog.html">
                        <i class="i-blog i-small"></i>订单管理
                    </a>
                </li>
                <li>
                    <a href="mGallery.html">
                        <i class="i-gallery i-small"></i>收藏夹
                    </a>
                </li>
                <li>
                    <a href="mShortCodes.html">
                        <i class="i-shortcodes i-small"></i>问题反馈
                    </a>
                </li>
            </ul>
        </nav>

<div id="header">
        <a href="#menu"></a>
        <span> 医呼百应 预约主页 </span>
        <a class="backBtn" href="javascript:history.back();"></a>
    </div>
<form action="/mobile/login" method="post" id="login_form">
    <div class="row" align="center" style="margin-top:30px;">
        <div class="large-12 columns" align="center">
            <input id="id_phoneNumber" name="phoneNumber" type="text" placeholder="手机号"/>
        </div>
    </div>

    <div class="row" align="center" style="margin-top:20px;">
        <div class="large-12 columns" align="center">
            <input id="id_passWord" name="passWord" type="password" placeholder="密码"/>
        </div>
    </div>


    <div class="row">

        <div class="large-4 medium-4 small-4 columns" align="left" style="margin-top:20px;">
            <input type="text" name="auth_code">
        </div>
        <button type="button" class="small radius button" style="margin-top:18px; background-color:#587eac" onclick="requestAuthCode(this)" >获取验证码
        </button>
    </div>
    <div class="large-12 columns" align="center" style="margin-top:40px;">
        <input type="hidden" name="previousUrl" value="<%= previousurl %>">
        <button type="submit" class="small radius button" name="post" value="true" style="background-color:#587eac">确定</button>
    </div>
</form>
<script src="js/vendor/jquery.js"></script>
<script src="js/foundation.min.js"></script>
<script>
    $(document).foundation();
</script>
<script>
    var xmlHttp;
    var remainingTime = 60;
    function requestAuthCode(button) {
        time(button);
        xmlHttp = GetXmlHttpObject();

        var url = "/mobile/generateAuthCodeL";
        xmlHttp.open("POST", url, true);
        xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlHttp.send();
        xmlHttp.onreadystatechange = getOkPost;
    }

    function time(button) {
        if (remainingTime == 0) {
            button.removeAttribute("disabled");
            button.innerHTML = "获取验证码";
            remainingTime = 60;
        } else {
            button.setAttribute("disabled", true);
            button.innerHTML = remainingTime + "秒后重新发送";
            remainingTime--;
            setTimeout(function () {
                        time(button)
                    },
                    1000);
        }
    }

    function GetXmlHttpObject() {
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        return xmlhttp;
    }

    function getOkPost() {
        if (xmlHttp.readyState == 1 || xmlHttp.readyState == 2 || xmlHttp.readyState == 3) {
            // 本地提示：加载中/处理中

        }
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
            var d = xmlHttp.responseText; // 返回值
            // 处理返回值
        }
    }
</script>
</div>
</body>
</html>




